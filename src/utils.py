import json
import tensorflow as tf
import gc

def load_configs_from_file(filepath):
  with open(filepath, 'r') as filehandle:
    config_json = json.load(filehandle)
  eval_sample_filename = config_json["general"]["eval_sample_filename"]
  repeats_per_model = config_json["general"]["repeats_per_model"]
  configs = config_json["configs"]
  return configs, eval_sample_filename, repeats_per_model

def free_memory():
  # Clear keras session
  tf.keras.backend.clear_session()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  # Do garbage collection explicitly 
  gc.collect()